@using MVC.Constants
@using Application.Constants

@{
    var controller = ViewContext.RouteData.Values["controller"]?.ToString() ?? "";
    string Active(string c) =>
        controller.Equals(c, StringComparison.OrdinalIgnoreCase) ? "active" : "";

    var role = Context.Session.GetString(SessionKeys.Role) ?? "User";

    bool IsAdmin() => role.Equals(RoleNames.Admin, StringComparison.OrdinalIgnoreCase);
    bool IsAccounting() => role.Equals(RoleNames.Accounting, StringComparison.OrdinalIgnoreCase);
    bool IsWarehouse() => role.Equals(RoleNames.Warehouse, StringComparison.OrdinalIgnoreCase);
    bool IsPurchasing() => role.Equals(RoleNames.Purchasing, StringComparison.OrdinalIgnoreCase);

    bool CanSeeAccounting() => IsAdmin() || IsAccounting();
    bool CanSeeWarehouse() => IsAdmin() || IsWarehouse();
    bool CanSeePurchasing() => IsAdmin() || IsPurchasing();
}

<div class="card shadow-sm rounded-3">
    <div class="card-header bg-dark text-white fw-semibold">
        <i class="bi bi-speedometer2 me-2"></i>
        Yönetim Menüsü
    </div>

    <div class="list-group list-group-flush dashboard-menu">

        @if (IsAdmin())
        {
            <a class="list-group-item list-group-item-action @Active("Home")"
               asp-area="DashBoard" asp-controller="Home" asp-action="Index">
                <i class="bi bi-house-door me-2"></i>
                Dashboard
            </a>

            <a class="list-group-item list-group-item-action @Active("Category")"
               asp-area="DashBoard" asp-controller="Category" asp-action="Index">
                <i class="bi bi-tags me-2"></i>
                Kategoriler
            </a>

            <a class="list-group-item list-group-item-action @Active("Movie")"
               asp-area="DashBoard" asp-controller="Movie" asp-action="Index">
                <i class="bi bi-film me-2"></i>
                Filmler
            </a>

            <a class="list-group-item list-group-item-action @Active("MembershipPlan")"
               asp-area="DashBoard" asp-controller="MembershipPlan" asp-action="Index">
                <i class="bi bi-card-checklist me-2"></i>
                Üyelik Planları
            </a>

            <a class="list-group-item list-group-item-action @Active("Member")"
               asp-area="DashBoard" asp-controller="Member" asp-action="Index">
                <i class="bi bi-people me-2"></i>
                Üyeler
            </a>

            <a class="list-group-item list-group-item-action @Active("MemberMovieList")"
               asp-area="DashBoard" asp-controller="MemberMovieList" asp-action="Index">
                <i class="bi bi-list-ul me-2"></i>
                Üye Film Listeleri
            </a>

            <a class="list-group-item list-group-item-action @Active("Returns")"
               asp-area="DashBoard" asp-controller="Returns" asp-action="Index">
                <i class="bi bi-arrow-counterclockwise me-2"></i>
                Geri İade Talepleri
            </a>

            <a class="list-group-item list-group-item-action @Active("Courier")"
               asp-area="DashBoard" asp-controller="Courier" asp-action="Distribution">
                <i class="bi bi-truck me-2"></i>
                Kuryeler
            </a>
        }

        @if (CanSeeWarehouse())
        {
            <a class="list-group-item list-group-item-action @Active("Shelf")"
               asp-area="DashBoard" asp-controller="Shelf" asp-action="Index">
                <i class="bi bi-grid-3x3-gap me-2"></i>
                Raf Yönetimi
            </a>

            <a class="list-group-item list-group-item-action @Active("MovieCopy")"
               asp-area="DashBoard" asp-controller="MovieCopy" asp-action="Index">
                <i class="bi bi-collection me-2"></i>
                Film Kopyaları
            </a>

            <a class="list-group-item list-group-item-action @Active("DeliveryRequest")"
               asp-area="DashBoard" asp-controller="DeliveryRequest" asp-action="Index">
                <i class="bi bi-box-seam me-2"></i>
                Teslimatlar
            </a>
        }

        @if (CanSeePurchasing())
        {
            <a class="list-group-item list-group-item-action @Active("PurchaseRequest")"
               asp-area="DashBoard" asp-controller="PurchaseRequest" asp-action="Index">
                <i class="bi bi-cart-plus me-2"></i>
                Satın Alma Talepleri
            </a>
        }

        @if (CanSeeAccounting())
        {
            <a class="list-group-item list-group-item-action @Active("Accounting")"
               asp-area="DashBoard" asp-controller="Accounting" asp-action="Index">
                <i class="bi bi-bar-chart-line me-2"></i>
                Muhasebe Raporları
            </a>
        }
    </div>
</div>
